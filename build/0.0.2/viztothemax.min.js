/*! viztothemax 2015-08-06 */
!function(a){var b={VERSION:"0.0.1",cssNamespace:"viz",displays:{},axis:{},utils:{},models:{},charts:{}};if(a.viz)throw new Error("viz has already been defined");a.viz=b}(window),function(a){a.viz.utils.randomInt=function(a,b){return Math.floor(Math.random()*(b-a)+a)},a.viz.utils.randomIntArray=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(this.randomInt(b,c));return d}}(window),function(a){a.viz.utils.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}}(window),function(a){a.viz.charts.cartesian=function(){function b(a){b.stepone(a)}return b.stepone=function(a){a.each(function(a){b._draw(this,a)})},b._draw=function(a,b){var c=a.clientWidth,d=a.clientHeight;this._container=a,this._svg=d3.select(a).append("svg").attr("class",this._containerClass).attr("width",c).attr("height",d),this._backgroundRect=this._svg.append("g").append("rect").attr("class",this._backgroundClass).attr("width",c-this._margin.left-this._margin.right).attr("height",d-this._margin.top-this._margin.bottom).attr("transform","translate("+this._margin.left+","+this._margin.top+")");var e=this;this._displays.forEach(function(a){var f=d3.scale.linear().domain([0,a.maxValue(b)]).range([d-e._margin.top-e._margin.bottom,0]);a.draw(e._svg,e._margin,e._xScale(c,b),f,e._xValue,b)})},b.update=function(a){var b=this._container.clientWidth,c=this._container.clientHeight,d=this;this._displays.forEach(function(e){var f=d3.scale.linear().domain([0,e.maxValue(a)]).range([c-d._margin.top-d._margin.bottom,0]);e.resize(d._xScale(b,a),f,a)})},b._xScale=function(a,b){var c=this;return d3.scale.linear().domain(c._xDomain(b)).range([0,a-c._margin.left-c._margin.right])},b._displays=[],b._container=null,b._svg=null,b._backgroundRect=null,b._containerClass=a.viz.cssNamespace+"-container",b._backgroundClass=a.viz.cssNamespace+"-background",b._margin={top:10,right:10,bottom:10,left:10},b._xValue=function(a,b){return b},b._xDomain=function(a){return[0,a.length-1]},b.addDisplay=function(a){return this._displays.push(a),this},b.xDomain=function(a){return a&&a.constructor&&a.call&&a.apply?(this._xDomain=a,this):(this._xDomain=function(b){return a},this)},b.xValue=function(a){return this._xValue=a,this},b.margin=function(a){return this._margin=a,this},b}}(window),function(a){a.viz.charts.resizableCartesian=function(){var b=a.viz.charts.cartesian();return b.stepone=function(c){c.each(function(c){b._draw(this,c);var d=this,e=a.viz.utils.debounce(function(a){b._resize(d,c)},200);window.addEventListener("resize",e,!1)})},b._resize=function(a,b){var c=a.clientWidth,d=a.clientHeight;this._svg.attr("width",c).attr("height",d),this._backgroundRect.attr("width",c-this._margin.left-this._margin.right).attr("height",d-this._margin.top-this._margin.bottom);var e=this;this._displays.forEach(function(a){var f=d3.scale.linear().domain([0,a.maxValue(b)]).range([d-e._margin.top-e._margin.bottom,0]);a.resize(e._xScale(c,b),f,b)})},b}}(window),function(a){a.viz.displays.circle=function(){var a=function(){};return a.draw=function(a,b,c,d,e,f){_xValue=e,this._container=a.append("g").attr("class",this._circleContainerClass).attr("transform","translate("+b.left+","+b.top+")"),this._container.selectAll("circle").data(f).enter().append("circle").attr("class",this._circleClass).attr("cx",this._cx(c)).attr("cy",this._cy(d)).attr("r",this._radius)},a.resize=function(a,b,c){this._container.selectAll("circle").data(c).attr("cx",this._cx(a)).attr("cy",this._cy(b))},a.maxValue=function(a){return d3.max(a,this._yValue)},a._cx=function(a){var b=this;return function(c,d){return a(b._xValue(c,d))}},a._cy=function(a){var b=this;return function(c,d){return a(b._yValue(c,d))}},a._container={},a._radius=3.5,a._yValue=function(a){return a},a._xValue=function(a,b){return b},a._circleContainerClass=viz.cssNamespace+"-circle_container",a._circleClass=viz.cssNamespace+"-circle",a.yValue=function(a){return this._yValue=a,this},a.radius=function(a){return this._radius=a,this},a}}(window),function(a){a.viz.displays.group=function(a){var b=function(){};return b.draw=function(a,b,c,d,e,f){this._svg=a,this._margin=b,this._xValue=e;var g=0;this._displays.forEach(function(h){h.draw(a,b,c,d,e,f[g]),g++})},b.resize=function(a,b,c){var d=this,e=0;this._displays.forEach(function(f){f.isDrawn?f.resize(a,b,c[e]):f.draw(d._svg,d._margin,a,b,d._xValue,c[e]),e++})},b.maxValue=function(a){var b=[],c=0;return this._displays.forEach(function(d){b.push(d.maxValue(a[c])),c++}),d3.max(b)},b.addDisplay=function(a){return this._displays.push(a),this},b._displays=a,b._svg={},b._margin={},b._xValue={},b}}(window),function(a){a.viz.displays.line=function(){var a=function(){};return a.draw=function(a,b,c,d,e,f){_xValue=e;var g=a.append("g").attr("class",this._lineContainerClass).attr("transform","translate("+b.left+","+b.top+")");this._path=g.selectAll(this._lineClass).data([f]).enter().append("path").attr("class",this._lineClass).attr("d",this._line(c,d)),this.isDrawn=!0},a.resize=function(a,b,c){this._path.data([c]).attr("d",this._line(a,b))},a.maxValue=function(a){return d3.max(a,this._yValue)},a._line=function(a,b){var c=this;return d3.svg.line().x(function(b,d){return a(c._xValue(b,d))}).y(function(a,d){return b(c._yValue(a,d))})},a._path={},a.isDrawn=!1,a._yValue=function(a){return a},a._xValue=function(a,b){return b},a._lineContainerClass=viz.cssNamespace+"-line_container",a._lineClass=viz.cssNamespace+"-line",a.yValue=function(a){return this._yValue=a,this},a["class"]=function(a){return this._lineClass=viz.cssNamespace+"-line "+a,this},a}}(window);