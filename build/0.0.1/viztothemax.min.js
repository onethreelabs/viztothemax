/*! viztothemax 2015-08-06 */
(function(t){var i={VERSION:"0.0.1",cssNamespace:"viz",displays:{},axis:{},utils:{},models:{},charts:{}};if(t.viz)throw Error("viz has already been defined");t.viz=i})(window),function(t){t.viz.utils.randomInt=function(t,i){return Math.floor(Math.random()*(i-t)+t)},t.viz.utils.randomIntArray=function(t,i,n){for(var a=[],r=0;t>r;r++)a.push(this.randomInt(i,n));return a}}(window),function(t){t.viz.utils.debounce=function(t,i,n){var a;return function(){var r=this,s=arguments,e=function(){a=null,n||t.apply(r,s)},c=n&&!a;clearTimeout(a),a=setTimeout(e,i),c&&t.apply(r,s)}}}(window),function(t){t.viz.charts.cartesian=function(){function i(t){i.stepone(t)}return i.stepone=function(t){t.each(function(t){i._draw(this,t)})},i._draw=function(t,i){var n=t.clientWidth,a=t.clientHeight;this._container=t,this._svg=d3.select(t).append("svg").attr("class",this._containerClass).attr("width",n).attr("height",a),this._backgroundRect=this._svg.append("g").append("rect").attr("class",this._backgroundClass).attr("width",n-this._margin.left-this._margin.right).attr("height",a-this._margin.top-this._margin.bottom).attr("transform","translate("+this._margin.left+","+this._margin.top+")");var r=this;this._displays.forEach(function(t){var s=d3.scale.linear().domain([0,t.maxValue(i)]).range([a-r._margin.top-r._margin.bottom,0]);t.draw(r._svg,r._margin,r._xScale(n,i),s,r._xValue,i)})},i.update=function(t){var i=this._container.clientWidth,n=this._container.clientHeight,a=this;this._displays.forEach(function(r){var s=d3.scale.linear().domain([0,r.maxValue(t)]).range([n-a._margin.top-a._margin.bottom,0]);r.resize(a._xScale(i,t),s,t)})},i._xScale=function(t,i){var n=this;return d3.scale.linear().domain(n._xDomain(i)).range([0,t-n._margin.left-n._margin.right])},i._displays=[],i._container=null,i._svg=null,i._backgroundRect=null,i._containerClass=t.viz.cssNamespace+"-container",i._backgroundClass=t.viz.cssNamespace+"-background",i._margin={top:10,right:10,bottom:10,left:10},i._xValue=function(t,i){return i},i._xDomain=function(t){return[0,t.length-1]},i.addDisplay=function(t){return this._displays.push(t),this},i.xDomain=function(t){return t&&t.constructor&&t.call&&t.apply?(this._xDomain=t,this):(this._xDomain=function(){return t},this)},i.xValue=function(t){return this._xValue=t,this},i.margin=function(t){return this._margin=t,this},i}}(window),function(t){t.viz.charts.resizableCartesian=function(){var i=t.viz.charts.cartesian();return i.stepone=function(n){n.each(function(n){i._draw(this,n);var a=this,r=t.viz.utils.debounce(function(){i._resize(a,n)},200);window.addEventListener("resize",r,!1)})},i._resize=function(t,i){var n=t.clientWidth,a=t.clientHeight;this._svg.attr("width",n).attr("height",a),this._backgroundRect.attr("width",n-this._margin.left-this._margin.right).attr("height",a-this._margin.top-this._margin.bottom);var r=this;this._displays.forEach(function(t){var s=d3.scale.linear().domain([0,t.maxValue(i)]).range([a-r._margin.top-r._margin.bottom,0]);t.resize(r._xScale(n,i),s,i)})},i}}(window),function(t){t.viz.displays.circle=function(){var t=function(){};return t.draw=function(t,i,n,a,r,s){_xValue=r,this._container=t.append("g").attr("class",this._circleContainerClass).attr("transform","translate("+i.left+","+i.top+")"),this._container.selectAll("circle").data(s).enter().append("circle").attr("class",this._circleClass).attr("cx",this._cx(n)).attr("cy",this._cy(a)).attr("r",this._radius)},t.resize=function(t,i,n){this._container.selectAll("circle").data(n).attr("cx",this._cx(t)).attr("cy",this._cy(i))},t.maxValue=function(t){return d3.max(t,this._yValue)},t._cx=function(t){var i=this;return function(n,a){return t(i._xValue(n,a))}},t._cy=function(t){var i=this;return function(n,a){return t(i._yValue(n,a))}},t._container={},t._radius=3.5,t._yValue=function(t){return t},t._xValue=function(t,i){return i},t._circleContainerClass=viz.cssNamespace+"-circle_container",t._circleClass=viz.cssNamespace+"-circle",t.yValue=function(t){return this._yValue=t,this},t.radius=function(t){return this._radius=t,this},t}}(window),function(t){t.viz.displays.group=function(t){var i=function(){};return i.draw=function(t,i,n,a,r,s){this._svg=t,this._margin=i,this._xValue=r;var e=0;this._displays.forEach(function(c){c.draw(t,i,n,a,r,s[e]),e++})},i.resize=function(t,i,n){var a=this,r=0;this._displays.forEach(function(s){s.isDrawn?s.resize(t,i,n[r]):s.draw(a._svg,a._margin,t,i,a._xValue,n[r]),r++})},i.maxValue=function(t){var i=[],n=0;return this._displays.forEach(function(a){i.push(a.maxValue(t[n])),n++}),d3.max(i)},i.addDisplay=function(t){return this._displays.push(t),this},i._displays=t,i._svg={},i._margin={},i._xValue={},i}}(window),function(t){t.viz.displays.line=function(){var t=function(){};return t.draw=function(t,i,n,a,r,s){_xValue=r;var e=t.append("g").attr("class",this._lineContainerClass).attr("transform","translate("+i.left+","+i.top+")");this._path=e.selectAll(this._lineClass).data([s]).enter().append("path").attr("class",this._lineClass).attr("d",this._line(n,a)),this.isDrawn=!0},t.resize=function(t,i,n){this._path.data([n]).attr("d",this._line(t,i))},t.maxValue=function(t){return d3.max(t,this._yValue)},t._line=function(t,i){var n=this;return d3.svg.line().x(function(i,a){return t(n._xValue(i,a))}).y(function(t,a){return i(n._yValue(t,a))})},t._path={},t.isDrawn=!1,t._yValue=function(t){return t},t._xValue=function(t,i){return i},t._lineContainerClass=viz.cssNamespace+"-line_container",t._lineClass=viz.cssNamespace+"-line",t.yValue=function(t){return this._yValue=t,this},t.class=function(t){return this._lineClass=viz.cssNamespace+"-line "+t,this},t}}(window);